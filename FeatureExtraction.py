import sys
import os

from FeatureExtraction.featureExtraction import featureExtraction, DECOMPILE_APK

args = sys.argv
if len(args) < 4:
    print("You need to specify as first argument the pass to your "
          "dataset and as second argument the path were the feature will be saved and "
          "as last argument where you want your decompiled data to be saved")
    sys.exit(1)

path_benign = os.listdir(f"{args[1]}/train/benign/")
path_benign = list(map(lambda x: f"{args[1]}/train/benign/" + x, path_benign))
path_malware = os.listdir(f"{args[1]}/train/malware/")
path_malware = list(map(lambda x: f"{args[1]}/train/malware/" + x, path_malware))
extractor = featureExtraction(args[2])
extractor.extract_sequence_feature(path_benign + path_malware, args[3], apktool_bool=DECOMPILE_APK)
